<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rationale Generator | Cinematic</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
html,body{
  margin:0;height:100%;background:#000;overflow:hidden;
  font-family:Inter,system-ui,sans-serif;
}
.phone{
  position:absolute;left:50%;top:50%;
  width:340px;height:680px;
  transform:translate(-50%,-50%);
  border-radius:40px;
  background:linear-gradient(160deg,#111,#000);
  box-shadow:0 60px 160px rgba(0,0,0,.95);
}
.screen{
  position:absolute;inset:18px;
  border-radius:32px;
  overflow:hidden;
  background:radial-gradient(circle at center,#1a1a1a,#000);
}
.screen::after{
  content:"";position:absolute;inset:0;border-radius:32px;
  border:1px solid rgba(230,230,230,.45);
  pointer-events:none;z-index:50;
}

/* BRAND & TITLES */
.brand{position:absolute;top:14px;right:16px;color:#eee;font-size:13px;font-weight:700;z-index:30}
.title{position:absolute;top:14px;width:100%;z-index:20}
.subtitle{position:absolute;top:78px;width:100%;text-align:center;color:#fff;font-weight:700}
.hook{position:absolute;top:102px;width:100%;text-align:center;color:#00e0ff;font-weight:800}

/* VIDEO */
.video-wrap{
  position:absolute;top:150px;left:0;right:0;height:260px;
}
video{width:100%;height:100%;object-fit:contain;background:#000}

/* QUIZ */
.quiz{
  position:absolute;bottom:22px;left:16px;right:16px;
  color:#fff;font-size:14px;z-index:10;
}
.quiz span{
  display:inline-block;
  margin-right:10px;
  transition:transform .4s ease;
}

/* FLYING WORD */
.fly{
  position:absolute;
  font-weight:900;
  pointer-events:none;
  transform:translate(-50%,-50%);
  filter:blur(0);
  transition:
    transform 3.4s cubic-bezier(.15,.85,.15,1),
    opacity 3.4s ease,
    filter 3.4s ease;
}
</style>
</head>

<body>
<div class="phone">
<div class="screen">

<div class="brand">ETK Yogya</div>

<div class="title">
<svg viewBox="0 0 320 70" width="100%">
<path id="c" d="M20,60 Q160,10 300,60" fill="none"/>
<text fill="#ffd700" font-size="16" font-weight="800">
<textPath href="#c" startOffset="50%" text-anchor="middle">
CBTLearning|Bahas|Mudah|SNBT'26
</textPath>
</text>
</svg>
</div>

<div class="subtitle" id="rationale">Rationale Generator</div>
<div class="hook">Pahami alasan, bukan hafalan</div>

<div class="video-wrap">
<video id="vid" autoplay muted loop playsinline>
<source src="https://raw.githubusercontent.com/gyoutrain-lab/tiktokdemo-snbt/main/videos/CutV2.mp4">
</video>
</div>

<div class="quiz" id="quiz">
<b>Harga 50.000 naik 20%?</b><br>
<span>A 55.000</span><span>B 58.000</span>
<span>C 60.000</span><span>D 62.000</span>
</div>

</div>
</div>

<script>
/* ---------- BPM LOCK ---------- */
const BPM = 72;
const BEAT = 60 / BPM;

const video = document.getElementById("vid");
const screen = document.querySelector(".screen");
const quiz = document.getElementById("quiz");
const rationale = document.getElementById("rationale");

/* ---------- EMIT CORE ---------- */
function emitFromElement(el, text, color="#fff"){
  const r = el.getBoundingClientRect();
  const e = document.createElement("div");
  e.className="fly";
  e.textContent=text;
  e.style.left = (r.left + r.width/2) + "px";
  e.style.top  = (r.top  + r.height/2) + "px";
  e.style.color=color;
  e.style.fontSize = 18 + Math.random()*8 + "px";
  e.style.opacity=1;
  e.style.textShadow="0 0 14px rgba(255,255,255,.35)";
  screen.appendChild(e);

  requestAnimationFrame(()=>{
    const dx=(Math.random()-0.5)*260;
    const dy=(Math.random()-0.5)*260;
    e.style.transform=`translate(${dx}px,${dy}px) scale(2.4)`;
    e.style.opacity=0;
    e.style.filter="blur(4px)";
  });

  setTimeout(()=>e.remove(),3400);
}

/* ---------- BEAT CLOCK ---------- */
let lastBeat=-1;
let state="";

video.addEventListener("timeupdate",()=>{
  const t = video.currentTime;
  const beat = Math.floor(t / BEAT);
  if (beat === lastBeat) return;
  lastBeat = beat;

  /* QUIZ PHASE */
  if (t < 6){
    state="quiz";
    quiz.querySelectorAll("span").forEach(s=>{
      s.style.transform=`translate(${Math.random()*8-4}px,${Math.random()*8-4}px)`;
    });
    if (beat % 2 === 0){
      emitFromElement(quiz,"SNBT QUIZ","#00e0ff");
    }
  }

  /* RATIONALE PHASE */
  if (t >= 6 && t < 14){
    if (state !== "rationale"){
      state="rationale";
      emitFromElement(rationale,"RATIONALE GENERATOR","#ffd700");
    }
  }

  /* STEPS PHASE */
  if (t >= 14){
    const steps=["Domain","Kompetensi","Konsep","Logika","Eliminasi","Kesimpulan"];
    const word = steps[beat % steps.length];
    emitFromElement(video,word,"#fff");
  }
});

/* ---------- MATH FORMULAS ---------- */
setInterval(()=>{
  emitFromElement(video,"x² + y² = r²","#fff");
},1800);
</script>
</body>
</html>
